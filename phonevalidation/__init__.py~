# Download the Python helper library from twilio.com/docs/python/install
from twilio.rest.lookups import TwilioLookupsClient
from twilio.rest.exceptions import TwilioRestException

# Your Account Sid and Auth Token from twilio.com/user/account
# Store them in the environment variables:
# "TWILIO_ACCOUNT_SID" and "TWILIO_AUTH_TOKEN"
# client = TwilioLookupsClient()
client = TwilioLookupsClient(account='AC6b9971c47dd3bcff76703abe4f85050b',
                             token='2b8c6b8bcccb872b7e3c941af2ecd87f')


def is_valid_number(number):
    try:
        response = client.phone_numbers.get(number, include_carrier_info=True)
        response.phone_number  # If invalid, throws an exception.
        return True
    except TwilioRestException as e:
        if e.code == 20404:
            return False
        else:
            raise e


print(is_valid_number('+919946782394'))  # False
print(is_valid_number('15108675309'))  # True